<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<title>Simulador PPR Individual</title>
    
	<style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
			min-height: 100vh;
			overflow: auto;
            background-color: #f1f1f1;
            background-image: url('https://www.shutterstock.com/image-photo/cirebon-west-java-indonesia-november-600nw-2223702633.jpg'); /* Adicione o caminho da sua imagem */
            background-size: cover; /* Ajusta a imagem para cobrir toda a área do fundo */
			background-position: top center; /* Ajusta a posição da imagem para o topo central */
			background-repeat: no-repeat;
            color: #333;
			zoom: 0.8;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            font-size: 50px; /* Ajuste o tamanho da fonte conforme necessário */
			font-weight: bold; /* Deixa o texto em negrito */
			color: white;
			text-align: center;
			text-shadow: 2px 2px 4px rgba(0, 0, 0, 1.0); /* Sombra do texto */
        /* color: #e60012; Cor vermelha Coca-Cola */
		
		}
        h2 {
            color: #fff;
        }
        .input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
		h4 {
            color: #fff;
        }
        .input-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .input-group {
			display: flex;
            background-color: #808080;
            color: #fff;
            border-radius: 9px;
            padding: 15px;
            width: 200px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }
        label {
            display: flex;
            font-weight: bold;
            margin-bottom: 5px;
            color: #fff;
        }
        input {
            width: calc(100% - 5px);
            padding: 9px;
            margin-top: 0px;
            border: 1px solid #ddd;
            border-radius: 4px;
            color: #000;
            font-weight: bold; /* Texto em negrito */
        }
        .calculation-box {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center; /* Isso mantém as caixas centralizadas dentro do contêiner */
        }
        .operator {
            display: flex;
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            align-items: center;
			text-align: right;
	
        }
		}
        .operator2 {
            display: flex;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            align-items: center;
			text-align: right;
	
        }
		
        .resultado-box {
            background-color: #808080; /* Cinza */
            color: #fff; /* Cor da fonte branca */
            padding: 15px;
            width: 69px;
            height: 35px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-size: 10px; /* Tamanho uniforme para o texto */
            border-radius: 9px; /* Cantos arredondados */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            font-weight: bold; /* Texto em negrito */
        }
        .resultado-box label {
            margin-bottom: 8px;
            font-weight: bold;
			align-items: center;
            justify-content: center;
        }
        .resultado-box span {
            font-size: 16px; /* Tamanho do texto do resultado */
        }
        .hidden {
            display: none;
        }
        .box {
            padding: 15px;
            width: 69px;
            height: 35px;
            text-align: center;
            background: linear-gradient(to bottom, #e60012, #c8102e); /* Gradiente Coca-Cola FEMSA */
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-size: 10px; /* Tamanho uniforme para o texto */
            border-radius: 9px; /* Cantos arredondados */
            color: #fff; /* Cor da fonte branca */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            font-weight: bold; /* Texto em negrito */
        }
        .box label {
            margin-bottom: 8px;
            font-weight: bold;
			align-items: center;
            justify-content: center;
        }
        .box span {
            font-size: 16px; /* Tamanho do texto do resultado */
			
			}
			.hidden {
    display: none;

        }
        .PPR-box {
            background-color: #4d4d4d; /* Cinza */
            color: #fff; /* Cor da fonte branca */
            padding: 10px;
            width: 260px;
            height: 80px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            font-size: 16px; /* Tamanho uniforme para o texto */
            border-radius: 9px; /* Cantos arredondados */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            font-weight: bold; /* Texto em negrito */
            position: relative; /* Permite o alinhamento preciso */
            right: 0; /* Alinha à direita do contêiner pai */
            top: 0; /* Alinha ao topo do contêiner pai */
        }
        .PPR-box label {
            display: flex;
            margin-bottom: 9px;
            font-weight: bold;
			text-align: center;
			justify-content: center;
        }
        .PPR-box span {
            font-size: 22px; /* Tamanho do texto do resultado */
            text-align: center;
        }
			 
	footer {
      background-color: rgba(255, 255, 255, 0.8); /* Cor branca com 80% de transparência */
      padding: 20px;
      border-radius: 10px;
      width: fit-content;
      margin: 20px auto; /* Centraliza horizontalmente */
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Adiciona leve sombra */
    }
    footer ul {
      list-style-type: disc; /* Marcadores de lista */
      margin: 0;
      padding: 0;
      padding-left: 20px; /* Espaçamento para os marcadores */
    }
    footer li {
      margin-bottom: 10px; /* Espaço entre os itens */
      font-family: Arial, sans-serif;
      font-size: 14px;
      color: #333; /* Texto em cor escura */
    }
    </style>
</head>
<body>

<div class="container">
    <h1>SIMULADOR PPR INDIVIDUAL 2024</h1>

<!-- Etapa 1: Entrada de dados -->
	  
    <h2>Dados para Simulação</h2>
	
	<div class="input-container" style="display: none">
    <div class="input-group">
    <label for="categoria">Regra de Pesos: </label>
    <select id="categoria">
        <option value="Regra_1">Normal      </option>
        <option value="Regra_2">Gerência 8+ </option>
    </select>
	
	</div>
	<div class="input-group">
    <label for="InputTarget">Target (Salários): </label>
    <input type="number" step="0.1" id="InputTarget" value="1">

	</div>
	</div>
    <div class="input-container">
		<div class="input-group">
            <label for="salario">Salário (Dez/24): </label>
            <input type="text" id="salario"class="currency-input" >
        </div>
        <div class="input-group">
            <label for="meses_trabalhados">Meses Trabalhados: </label>
            <input type="number" id="meses_trabalhados"  min="0" max="12" step="1" value="" required>
        </div>
        <div class="input-group">
            <label for="nota_desempenho">*Nota de Desempenho: </label>
            <input type="number" id="nota_desempenho"  min="0" max="5" step="1" value="" required>
        </div>
        <div class="input-group">
            <label for="fator_desempenho">*Fator de Desempenho: </label>
            <input type="number" step="0.001" id="fator_desempenho"  min="0" max="1.5" value="0" required>
        </div>
    </div>
	<h4>Intervalo de Fatores por Nota: 1 = [0,000 a 0,624] 2 = [0,625 a 0,899] 3 = [0,900 a 1,134] 4 = [1,135 a 1,383] 5 = [1,384 a 1,500]</h4>
	
	<div id="erro_fator" style="color: red; background: white; display: none;">Preencher o fator de desempenho! Por gentileza utilize o intervalo acima..</div>
	
 <!-- Etapa 2: Cálculo Automático -->
    <h2>Memória de Cálculo Detalhada</h2>
    		<div class="operator">Resultado do Negócio</div>
    <div class="calculation-box">
	
        <!-- Resultados do Negócio -->
        <div class="box">
            <label>Indicador Negócio:</label>
            <span id="nota_indicador_negocio">0</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Peso Indicador:</label>
            <span id="peso_indicador_negocio">0.3</span>
        </div>
        <div class="operator">=</div>
        <div class="resultado-box">
            <label>Resultado</label>
            <span id="indicador_negocio">0</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Target (Salários): </label>
            <span id="target_negocio">1</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Salário: </label>
            <span id="salario_negocio">0</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Meses Trabalhados (div. por 12): </label>
            <span id="meses_negocio">0</span>
        </div>
        <div class="box hidden">
            <label>Meses Proporcionais: </label>
            <span id="proporcao_mes_negocio">0</span>
        </div>
        <div class="operator">=</div>
        <div class="resultado-box">
            <label>Resultado Negócio: </label>
            <span id="resultado_negocio">0</span>
        </div>
    </div>

<div class="operator"> Resultado Individual</div>
    <div class="calculation-box">
	
<!-- Resultados Individuais -->
        <div class="box">
            <label>Fator Desempenho:</label>
            <span id="fator_desempenho_individual">0</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Peso Indicador:</label>
            <span id="peso_indicador_individual">0.7</span>
        </div>
        <div class="operator">=</div>
        <div class="resultado-box">
            <label>Resultado: </label>
            <span id="nota_peso_individual">0</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Target (Salários): </label>
            <span id="target_individual">1</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Salário:</label>
            <span id="salario_individual">0</span>
        </div>
        <div class="operator">X</div>
        <div class="box">
            <label>Meses Trabalhados (div. por 12): </label>
            <span id="meses_individual">0</span>
        </div>
        <div class="box hidden">
            <label>Meses Proporcionais: </label>
            <span id="proporcao_mes_individual">0</span>
        </div>
        <div class="operator">=</div>
        <div class="resultado-box">    
            <label>Resultado Individual: </label>
            <span id="resultado_individual">0</span>
        </div>
    </div>

    <!-- Soma dos Resultados -->
    <div class="PPR-box">
        <label>Resultado Final</label>
        <span id="ppr_total">0</span>
    </div>
</div>

<script>
    // Função para calcular os valores
    function calcular() {
        // Pegar valores inseridos e ajustar para formato correto
        const salario = parseFloat(document.getElementById('salario').value
            .replace(/\./g, '')  // Remove todos os pontos (milhares)
            .replace(',', '.')   // Substitui a vírgula por ponto (decimal)
            .replace('R$', '')    // Remove o símbolo de R$
            .trim());

        const mesesTrabalhados = parseInt(document.getElementById('meses_trabalhados').value, 10);
        const notaDesempenho = parseFloat(document.getElementById('nota_desempenho').value);
        const fatorDesempenho = parseFloat(document.getElementById('fator_desempenho').value);

        // Pegar a regra de pesos
        const categoria = document.getElementById('categoria').value;

        // Definir pesos com base na regra selecionada
        let pesoNegocio, pesoDesempenho;
        if (categoria === "Regra_2") {
            pesoNegocio = 0.5; // Peso para o indicador de negócio (Gerência 8+)
            pesoDesempenho = 0.5; // Peso para o indicador de desempenho (Gerência 8+)
        } else {
            pesoNegocio = 0.3; // Peso fixo do indicador de negócio (Normal)
            pesoDesempenho = 0.7; // Peso fixo do indicador de desempenho (Normal)
        }

        // Verificar se algum valor é inválido
        if (isNaN(salario) || isNaN(mesesTrabalhados) || isNaN(notaDesempenho) || isNaN(fatorDesempenho)) {
            document.getElementById('ppr_total').textContent = "-";
            return; // Se algum valor for inválido, sair da função
        }

        // Pegar o valor de 'targetNegocio' e 'target_individual' (assumindo que esses são os campos corretos)
        const targetNegocio = parseFloat(document.getElementById('InputTarget').value);
        const targetIndividual = parseFloat(document.getElementById('InputTarget').value);

        // Cálculo do Resultado do Negócio
        const notaIndicadorNegocio = (notaDesempenho === 0) ? 0 : 1.6261; //alterar aqui o resultado do negócio
        const indicadorNegocio = notaIndicadorNegocio * pesoNegocio;
        const proporcaoMesesNegocio = mesesTrabalhados / 12;
        const resultadoNegocio = indicadorNegocio * targetNegocio * salario * proporcaoMesesNegocio;

        // Cálculo do Resultado Individual
        const notaPesoIndividual = fatorDesempenho * pesoDesempenho;
        const resultadoIndividual = notaPesoIndividual * targetIndividual * salario * proporcaoMesesNegocio;

		// Cálculo do Total PPR
		const baseCalculo = resultadoNegocio + resultadoIndividual;
		const calculo = baseCalculo * 0.60;
		let totalPPR;
		
		switch (notaDesempenho) {
			case 0:  totalPPR = "-"; 								break;
			case 1:  totalPPR = calculo <= 1059 ? 1059 : calculo; 	break;
			case 2:  totalPPR = baseCalculo * 0.75; 				break;
			default: totalPPR = baseCalculo * 1.00; 				break;
		}
		
		// Verifica e formata o resultado
		if (typeof totalPPR === "number" && !isNaN(totalPPR)) {
			totalPPR = totalPPR.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL',  minimumFractionDigits: 0,maximumFractionDigits: 0  });
		} else {
			totalPPR = "-"; // Para casos inelegíveis
		}

        // Exibe o valor calculado no campo do total PPR
        document.getElementById('ppr_total').textContent = totalPPR;

        // Atualizar valores na memória de cálculo
        document.getElementById('nota_indicador_negocio').innerText = isNaN(notaIndicadorNegocio) ? "-" : notaIndicadorNegocio.toFixed(4);
        document.getElementById('peso_indicador_negocio').innerText = isNaN(pesoNegocio) ? "-" : pesoNegocio.toFixed(2);
        document.getElementById('indicador_negocio').innerText = isNaN(indicadorNegocio) ? "-" : indicadorNegocio.toFixed(2);
        document.getElementById('target_negocio').innerText = isNaN(targetNegocio) ? "-" : targetNegocio.toFixed(2);
        document.getElementById('salario_negocio').innerText = isNaN(salario) ? "-" : salario.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL', minimumFractionDigits: 0, maximumFractionDigits: 0 });

        document.getElementById('meses_negocio').innerText = isNaN(mesesTrabalhados) ? "-" : mesesTrabalhados;
        document.getElementById('proporcao_mes_negocio').innerText = isNaN(proporcaoMesesNegocio) ? "-" : proporcaoMesesNegocio.toFixed(2);
        document.getElementById('resultado_negocio').innerText = isNaN(resultadoNegocio) ? "-" : resultadoNegocio.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL', minimumFractionDigits: 0, maximumFractionDigits: 0 });

        document.getElementById('fator_desempenho_individual').innerText = isNaN(fatorDesempenho) ? "-" : fatorDesempenho.toFixed(3);
        document.getElementById('peso_indicador_individual').innerText = isNaN(pesoDesempenho) ? "-" : pesoDesempenho.toFixed(2);
        document.getElementById('nota_peso_individual').innerText = isNaN(notaPesoIndividual) ? "-" : notaPesoIndividual.toFixed(2);
        document.getElementById('target_individual').innerText = isNaN(targetIndividual) ? "-" : targetIndividual.toFixed(2);
        document.getElementById('salario_individual').innerText = isNaN(salario) ? "-" : salario.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL', minimumFractionDigits: 0, maximumFractionDigits: 0 });
        document.getElementById('meses_individual').innerText = isNaN(mesesTrabalhados) ? "-" : mesesTrabalhados;
        document.getElementById('proporcao_mes_individual').innerText = isNaN(proporcaoMesesNegocio) ? "-" : proporcaoMesesNegocio.toFixed(2);
        document.getElementById('resultado_individual').innerText = isNaN(resultadoIndividual) ? "-" : resultadoIndividual.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL', minimumFractionDigits: 0, maximumFractionDigits: 0 });
    }

    // Função para atualizar os limites do fator de desempenho com base na nota de desempenho
    function atualizarLimitesFator() {
        const notaDesempenho = parseFloat(document.getElementById('nota_desempenho').value);
        const inputFator = document.getElementById('fator_desempenho');
        const erroFator = document.getElementById('erro_fator');

        // Definir os limites de min e max com base na nota
        let min, max;

        switch (notaDesempenho) {
            case 0:
                min = 0.000;
                max = 0.000;
                break;
            case 1:
                min = 0.000;
                max = 0.624;
                break;
            case 2:
                min = 0.625;
                max = 0.899;
                break;
            case 3:
                min = 0.900;
                max = 1.134;
                break;
            case 4:
                min = 1.135;
                max = 1.383;
                break;
            case 5:
                min = 1.384;
                max = 1.500;
                break;
            default:
                min = 0;
                max = 1.5;
        }

        inputFator.min = min;
        inputFator.max = max;

        // Validar o valor atual do inputFator
        validarInput(inputFator, min, max, erroFator);
    }

    // Função genérica para validar valores dentro dos limites
    function validarInput(input, min, max, erroElemento) {
        const value = parseFloat(input.value);

        if (value < min || value > max || isNaN(value)) {
            erroElemento.style.display = 'block'; // Exibe o erro se o valor estiver fora do intervalo
        } else {
            erroElemento.style.display = 'none'; // Oculta o erro se o valor for válido
        }
    }

    // Função para restringir os valores dos inputs dentro de seus limites
    function restringirValores() {
        // Definir os limites dos inputs, exceto para salário e target
        const inputs = [
            { id: 'nota_desempenho', min: 0, max: 5 },
            { id: 'fator_desempenho', min: 0, max: 1.5 },
            { id: 'meses_trabalhados', min: 0, max: 12 },
        ];

        inputs.forEach(({ id, min, max }) => {
            const input = document.getElementById(id);
            if (input) {
                input.min = min;
                input.max = max;
                if (input.value < min) input.value = min;
                if (input.value > max) input.value = max;
            }
        });
    }

    // Função para atualizar os valores sempre que houver alteração em qualquer input
    function atualizarValores() {
        restringirValores();  // Restringir valores de input
        atualizarLimitesFator(); // Atualizar limites do fator de desempenho
        calcular();  // Recalcular o PPR
    }

    // Adicionar eventos de input para todos os campos
    document.getElementById('salario').addEventListener('input', atualizarValores);
    document.getElementById('meses_trabalhados').addEventListener('input', atualizarValores);
    document.getElementById('nota_desempenho').addEventListener('input', atualizarValores);
    document.getElementById('fator_desempenho').addEventListener('input', atualizarValores);
    document.getElementById('InputTarget').addEventListener('input', atualizarValores);

    // Inicializa as restrições e cálculos ao carregar a página
    window.onload = atualizarValores;
</script>

</body>
</html>

<footer>
  <ul>
	<h3>Considerações:</h3>	
	<li>*A Nota e Fator de Desempenho só serão disponibilizados após o gestor imediato encaminhar o formulário de avaliação calibrado para a assinatura do colaborador. Somente após o encerramento do ciclo, o colaborador poderá visualizar a nota no formulário de talentos;</li>
	<h3></h3>	
	<li>Os valores apresentados neste simulador estão com as casas decimais arredondadas;</li>	
    <li>Haverá desconto de Imposto de Renda (IR), conforme a tabela vigente do ano em questão;</li>
    <li>Poderá haver desconto de contribuição assistencial, conforme o acordo Sindical, pelo ao qual está alocado;</li>
	<li>Caso o colaborador tenha alterações no cargo ou salário ao longo do ano, será necessário realizar a simulação de forma proporcional, considerando o nível de posição. Para ambos os cálculos, considerar o salário de Dezembro;</li>
    </ul>
</footer>